<div class="mt-5">
  <ng-container *ngIf="isLoading$ | async">
    <div class="text-center mt-5">
      <div class="spinner-border text-primary" role="status">
        <span class="sr-only">Loading...</span>
      </div>
    </div>
  </ng-container>

  <ng-container *ngIf="(isLoading$ | async) === false">
    <div class="text-right">
      <button
        type="button"
        [disabled]="(sortedBy$ | async) === 'price'"
        (click)="sortProductByPrice()"
        class="btn btn-link"
      >
        Sort by Price
      </button>
      <button
        type="button"
        [disabled]="(sortedBy$ | async) === 'name'"
        (click)="sortProductByName()"
        class="btn btn-link"
      >
        Sort A-Z
      </button>
    </div>
    <div class="card-deck mt-5">
      <ng-container *ngFor="let product of products$ | async; let num = index">
        <div class="card shadow">
          <img
            (click)="showDetail(product)"
            class="card-img-top"
            src="{{ 'assets/images/' + product.imagePath }}"
            alt="Card image cap"
          />

          <div class="card-body">
            <button (click)="showDetail(product)" class="btn btn-link">
              <h4 class="card-title">
                {{ product.name }}
              </h4>
            </button>

            <p class="card-text ml-2">
              {{
                product.detail.length > 100
                  ? (product.detail | slice: 0:100) + '...'
                  : product.detail
              }}
            </p>

            <div class="row">
              <div class="col">
                <span class="h4 text-danger float-left">
                  {{ product.price | currency: 'GBP' }}
                </span>
              </div>
              <div class="col text-right">
                <button
                  *ngIf="!product.added"
                  class="btn btn-success rounded-pill"
                  (click)="addToBasket(product)"
                >
                  <i class="fa fa-shopping-basket" aria-hidden="true"></i>
                  Add
                </button>
                <button
                  *ngIf="product.added"
                  class="btn btn-danger rounded-pill"
                  (click)="removeFromBasket(product)"
                >
                  <i class="fa fa-times" aria-hidden="true"></i>
                  Remove
                </button>
              </div>
            </div>
          </div>
        </div>
        <!-- <app-product-list-item [product]="p"></app-product-list-item> -->
      </ng-container>
    </div>
  </ng-container>
</div>
